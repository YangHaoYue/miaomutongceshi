(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-gongying-gongying"],{"33ea":function(t,e,i){"use strict";i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={onLoad:function(t){this.type=t.type,""!=t.breed_id&&(this.breed_id=t.breed_id||0,this.category=t.category),""!=t.cate_id&&(this.cate_id=t.cate_id),0==t.type?this.title="家庭供应":3==t.type&&(this.title="求购大厅"),this.getInfo(1),this.getFather()},onShow:function(){var t=this;uni.$on("ScreenChange",(function(e){t.screenList=e.screenList,t.sizeChange(),t.list=[],t.getInfo(1)}))},onPullDownRefresh:function(){this.list=[],this.getInfo(1),uni.stopPullDownRefresh()},onReachBottom:function(){this.current_page<this.last_page?(this.current_page++,this.getInfo(this.current_page)):this.http.toast("到底了！")},data:function(){return{type:1,title:"工程供应",area_id:0,areaName:"地区",region:["北京市","北京市","东城区"],cate_id:0,breed_id:0,category:"品类",multiArray:[[],[]],multiIndex:[0,0],BreedCategoryList:"",multi_current_page:"",multi_last_page:"",isScreenChange:!1,screenList:{},size:{},cityList:[],whichCity:-1,current_page:"",last_page:"",list:[],modalName:"",btnList:[{title:"发布供应",img:"../../../static/home/category/gongcheng.png"},{title:"发布求购",img:"../../../static/home/category/qiugou.png"}]}},methods:{getInfo:function(t){var e=this,i="",a={};3==this.type?(i="want/getList",a={page:t,breed_id:this.breed_id,area_id:this.area_id,size:this.size}):(i="supply/getList",a={page:t,breed_id:this.breed_id,area_id:this.area_id,cate_id:this.cate_id||0,supply_type:this.type||1,size:this.size}),this.http.post(i,a).then((function(t){1e3==t.code&&(0==e.list.length?(e.list=t.data.data,e.current_page=t.data.current_page,e.last_page=t.data.last_page):e.list=e.list.concat(t.data.data))}))},getFather:function(){var t=this;this.http.post("breed/getBreedCategory",{pid:0,page:1},!0).then((function(e){1e3==e.code&&(t.multiArray[0]=e.data.data,t.getBreedCategory(t.multiArray[0][0].id,1,!1))}))},getBreedCategory:function(t,e,i){var a=this;this.http.post("breed/getBreedCategory",{pid:t,page:e},!0).then((function(t){1e3==t.code&&(1==e&&(a.multi_current_page=t.data.current_page,a.multi_last_page=t.data.last_page),a.multiArray[1]=i?a.multiArray[1].concat(t.data.data):t.data.data,a.$forceUpdate())}))},sizeChange:function(){var t=this;this.size["rodDiameter"]=t._format(t.screenList[1]),this.size["height"]=t._format(t.screenList[2]),this.size["crownWidth"]=t._format(t.screenList[3]),this.size["plantingStatus"]=t._format(t.screenList[4]),this.size["treeCrown"]=t._format(t.screenList[5]),this.size["quality"]=t._format(t.screenList[6]),this.size["soilQuality"]=t._format(t.screenList[7]),this.size["treeShape"]=t._format(t.screenList[8]),this.size["density"]=t._format(t.screenList[9]),this.size["branch"]=t._format(t.screenList[10]),this.size["nurseryForm"]=t._format(t.screenList[11]),console.log(this.size)},_format:function(t){var e={};return e["id"]=t.id||0,e["value1"]=t.value1||0,e["value2"]=t.value2||0,e},RegionChange:function(t){console.log(t.detail),this.region=t.detail.value,this.area_id=t.detail.code[2],this.areaName=t.detail.value[2],this.getInfo(1)},MultiChange:function(t){this.multiIndex=t.detail.value,this.breed_id=this.multiArray[1][this.multiIndex[1]].id,this.category=this.multiArray[1][this.multiIndex[1]].text,this.list=[],this.getInfo(1)},MultiColumnChange:function(t){var e=t.detail.column,i=t.detail.value;0===e?(this.getBreedCategory(this.multiArray[0][i].id,1,!1),this.multiIndex=[i,0]):1===e&&this.multi_current_page<this.multi_last_page&&(i+1)/30==this.multi_current_page&&(this.multi_current_page++,this.getBreedCategory(this.multiArray[0][this.multiIndex[0]].id,this.multi_current_page,!0),this.multiIndex=[this.multiIndex[0],i])},toScreen:function(){uni.navigateTo({url:"screen"})},chooseCity:function(t){console.log(t),this.whichCity==t?this.whichCity=-1:this.whichCity=t},toOffer:function(t){uni.navigateTo({url:"/pages/home/offer/offer?want_id="+t})},toGYDetail:function(t){uni.navigateTo({url:"detail?supply_id="+t})},toQGDetail:function(t){uni.navigateTo({url:"../../mine/QiuGou/detail?want_id="+t})},showModal:function(){this.modalName="bottomModal"},hideModal:function(){this.modalName=null},toRelease:function(t){uni.navigateTo({url:"../../release/release?index="+t})}}};e.default=a},4515:function(t,e,i){var a=i("7feb");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("5169dd27",a,!0,{sourceMap:!1,shadowMode:!1})},5977:function(t,e,i){"use strict";i.r(e);var a=i("8347"),n=i("ced5");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("9615");var r,o=i("f0c5"),l=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"654fc259",null,!1,a["a"],r);e["default"]=l.exports},"7feb":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".float_fabu[data-v-654fc259]{position:fixed;bottom:%?120?%;right:%?50?%;height:%?100?%;width:%?100?%;background-color:#00913a;color:#fff;-webkit-box-shadow:2px 2px 3px grey;box-shadow:2px 2px 3px grey}.bg-nomal[data-v-654fc259]{background-color:#f7f7f7;color:#a9a9a9}",""]),t.exports=e},8347:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-green",isBack:!0,showBackImg:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v(t._s(t.title))])],2),i("v-uni-view",{staticClass:"cu-bar search bg-white"},[i("v-uni-navigator",{staticClass:"search-form round u-skeleton-fillet",attrs:{"hover-class":"none",url:"/pages/home/search/search",redirect:!0}},[i("v-uni-view",{staticClass:"search-form round"},[i("v-uni-text",{staticClass:"cuIcon-search"}),i("v-uni-input",{attrs:{"adjust-position":!1,type:"text",placeholder:"搜索供应","confirm-type":"search",disabled:"true"}})],1)],1)],1),i("v-uni-view",{staticClass:"flex justify-around bg-white padding",class:t.isScreenChange?"solid-bottom":"margin-bottom"},[i("v-uni-view",{staticClass:"flex-sub text-center"},[i("v-uni-picker",{attrs:{mode:"region",value:t.region},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.RegionChange.apply(void 0,arguments)}}},[t._v(t._s(t.areaName)),i("v-uni-text",{staticClass:"cuIcon-unfold"})],1)],1),i("v-uni-view",{staticClass:"flex-sub text-center"},[i("v-uni-picker",{attrs:{mode:"multiSelector",value:t.multiIndex,range:t.multiArray,"range-key":"text"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.MultiChange.apply(void 0,arguments)},columnchange:function(e){arguments[0]=e=t.$handleEvent(e),t.MultiColumnChange.apply(void 0,arguments)}}},[t._v(t._s(t.category)),i("v-uni-text",{staticClass:"cuIcon-unfold"})],1)],1),i("v-uni-view",{staticClass:"flex-sub text-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toScreen.apply(void 0,arguments)}}},[t._v("筛选"),i("v-uni-text",{staticClass:"cuIcon-unfold"})],1)],1),t.isScreenChange?i("v-uni-view",{staticClass:"bg-white margin-bottom padding-top-xs"},[i("v-uni-view",{staticClass:"text-center text-gray"},[t._v("-主产区-")]),i("v-uni-view",{staticClass:"flex padding-lr padding-tb-sm"},t._l(t.cityList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-btn round margin-right-sm",class:t.whichCity==a?"bg-green":"bg-nomal",staticStyle:{width:"160rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseCity(a)}}},[t._v(t._s(e))])})),1)],1):t._e(),t._l(t.list,(function(e,a){return 3!=t.type?i("v-uni-view",{key:a,staticClass:"flex padding bg-white padding-tb-sm",staticStyle:{width:"100%"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toGYDetail(e.id)}}},[i("v-uni-view",{staticClass:"flex-sub "},[i("v-uni-image",{staticStyle:{width:"234rpx",height:"214rpx"},attrs:{src:t.http.resourceUrl()+e.img,mode:"aspectFit"}})],1),i("v-uni-view",{staticClass:"margin-left flex-twice"},[i("v-uni-view",{staticClass:"flex align-center justify-between margin-top "},[i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"text-black text-lg text-bold"},[t._v(t._s(e.title))]),1==e.usage_type?i("v-uni-view",{staticClass:"bg-green margin-left text-center radius text-sm",staticStyle:{width:"80rpx"}},[t._v("工程")]):i("v-uni-view",{staticClass:"bg-green margin-left text-center radius text-sm",staticStyle:{width:"80rpx"}},[t._v("家庭")])],1),i("v-uni-view",[t._v(t._s(e.time))])],1),i("v-uni-view",{staticClass:"flex align-center margin-top-sm"},[i("v-uni-view",{staticClass:"money"},[t._v(t._s(e.price)),i("v-uni-text",[t._v(t._s(e.unit))])],1),i("v-uni-view",{staticClass:"margin-left"},[t._v(t._s(e.view_count)+"人查看")])],1),i("v-uni-view",{staticClass:"margin-top-sm"},[1==e.person_auth?i("v-uni-text",{staticClass:"bg-blue margin-right-xs"},[t._v("企")]):t._e(),1==e.enterprise_auth?i("v-uni-text",{staticClass:"bg-green margin-right-xs"},[t._v("保")]):t._e(),t._v(t._s(e.area))],1)],1)],1):t._e()})),t._l(t.list,(function(e,a){return 3==t.type?i("v-uni-view",{key:a,staticClass:"flex padding bg-white padding-tb-sm solid-bottom",staticStyle:{width:"100%"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toQGDetail(e.id)}}},[i("v-uni-view",{staticClass:"margin-left flex-twice"},[i("v-uni-view",{staticClass:"flex align-center justify-between margin-top"},[i("v-uni-view",{staticClass:"text-black text-lg"},[t._v(t._s(e.title))]),i("v-uni-view",[t._v(t._s(e.time))])],1),i("v-uni-view",{staticClass:"flex align-center margin-top-sm"},[t._v("求购数量："+t._s(e.count)+"株 | "+t._s(e.deadline)+"截至")]),i("v-uni-view",{staticClass:"flex align-center margin-top-sm"},[t._v("求购地区："+t._s(e.area))]),i("v-uni-view",{staticClass:"margin-top-sm flex justify-between"},[i("v-uni-view",[1==e.person_auth?i("v-uni-text",{staticClass:"bg-blue margin-right-xs",staticStyle:{padding:"4rpx"}},[t._v("企")]):t._e(),1==e.enterprise_auth?i("v-uni-text",{staticClass:"bg-green margin-right-xs",staticStyle:{padding:"4rpx"}},[t._v("保")]):t._e(),i("v-uni-text",{staticClass:"text-gray"},[t._v(t._s(e.offer_count)+"个报价")])],1),i("v-uni-navigator",{attrs:{"hover-class":"none",url:"/pages/home/offer/offer?want_id="+e.id,navigateTo:!0}},[i("v-uni-button",{staticClass:"cu-btn line-green sm",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toOffer(e.id)}}},[t._v("去报价")])],1)],1)],1)],1):t._e()})),i("v-uni-view",{staticClass:"flex align-center justify-center round float_fabu padding-sm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"text-center"},[t._v("发布")])],1),i("v-uni-view",{staticClass:"cu-modal bottom-modal",class:"bottomModal"==t.modalName?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"padding-xl bg-white flex justify-around"},t._l(t.btnList,(function(e,a){return i("v-uni-view",{key:a,on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toRelease(a)}}},[i("v-uni-view",{staticStyle:{width:"90rpx",height:"90rpx",margin:"auto"}},[i("v-uni-image",{staticStyle:{width:"90rpx",height:"90rpx"},attrs:{src:e.img,mode:"aspectFit"}})],1),i("v-uni-text",[t._v(t._s(e.title))])],1)})),1),i("v-uni-view",{staticClass:"cu-bar bg-white justify-center"},[i("v-uni-text",{staticClass:"cuIcon-close text-bold",staticStyle:{"font-size":"32upx"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}})],1)],1)],1)],2)},s=[]},9615:function(t,e,i){"use strict";var a=i("4515"),n=i.n(a);n.a},ced5:function(t,e,i){"use strict";i.r(e);var a=i("33ea"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}}]);