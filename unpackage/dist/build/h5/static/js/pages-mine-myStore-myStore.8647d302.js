(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-myStore-myStore"],{1745:function(t,e,i){"use strict";var s=i("af7c"),n=i.n(s);n.a},2442:function(t,e,i){"use strict";var s;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return s}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-green",isBack:!0,showBackImg:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("编辑我的苗店")])],2),i("v-uni-view",[i("v-uni-view",{staticClass:"bg-white flex justify-between padding align-center"},[i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"cu-avatar round lg"},[i("v-uni-image",{staticClass:"cu-avatar round lg",attrs:{src:t.http.resourceUrl()+t.RimgList[0]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ViewImage("R")}}})],1),i("v-uni-view",{staticClass:"margin-left-sm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImage("R")}}},[t._v("修改头像")])],1)],1),i("v-uni-form",[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{width:"150rpx"}},[t._v("店铺名称")]),i("v-uni-input",{attrs:{placeholder:"请输入店铺名称",name:"input"},model:{value:t.storeInfo.name,callback:function(e){t.$set(t.storeInfo,"name",e)},expression:"storeInfo.name"}}),i("v-uni-text",{staticClass:"cuIcon-right text-gray"})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{width:"150rpx"}},[t._v("手机号")]),i("v-uni-input",{attrs:{placeholder:"请输入手机号",type:"number",name:"input"},model:{value:t.storeInfo.mobile,callback:function(e){t.$set(t.storeInfo,"mobile",e)},expression:"storeInfo.mobile"}}),i("v-uni-text",{staticClass:"cuIcon-right text-gray"})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{width:"150rpx"}},[t._v("所在地")]),i("v-uni-input",{attrs:{placeholder:"请选择所在地",disabled:"true",name:"input"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseLocation.apply(void 0,arguments)}},model:{value:t.storeInfo.address,callback:function(e){t.$set(t.storeInfo,"address",e)},expression:"storeInfo.address"}}),i("v-uni-text",{staticClass:"cuIcon-right text-gray"})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{width:"150rpx"}},[t._v("公司介绍")]),i("v-uni-input",{attrs:{placeholder:"请输入公司名称",name:"input"},model:{value:t.storeInfo.enterprise_intro,callback:function(e){t.$set(t.storeInfo,"enterprise_intro",e)},expression:"storeInfo.enterprise_intro"}}),i("v-uni-text",{staticClass:"cuIcon-right text-gray"})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title",staticStyle:{width:"150rpx"}},[t._v("主营")]),i("v-uni-input",{attrs:{placeholder:"请输入主营",name:"input"},model:{value:t.storeInfo.business,callback:function(e){t.$set(t.storeInfo,"business",e)},expression:"storeInfo.business"}}),i("v-uni-text",{staticClass:"cuIcon-right text-gray"})],1),i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action"},[t._v("二维码上传")])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.GimgList,(function(e,s){return i("v-uni-view",{key:s,staticClass:"bg-img",attrs:{"data-url":t.GimgList[s]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ViewImage("G")}}},[i("v-uni-image",{attrs:{src:t.http.resourceUrl()+t.GimgList[s],mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":s},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.DelImg("G")}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.GimgList.length<1?i("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImage("G")}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2)],1)],1),i("v-uni-button",{staticClass:"cu-btn bg-green logobtn ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.apply.apply(void 0,arguments)}}},[t._v("保存")])],1)],1)},a=[]},3071:function(t,e,i){"use strict";i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("33a3"),n={onLoad:function(){this.getStoreInfo(),this.qqmapsdk=new s({key:this.key})},data:function(){return{qqmapsdk:null,key:"JTHBZ-TMF32-BERUV-CBXUN-NWI2K-QTFMX",storeInfo:"",RimgList:[],GimgList:[],id_card_imgs:[]}},methods:{getStoreInfo:function(){var t=this;this.http.get("user/getStoreInfo").then((function(e){1e3==e.code&&(t.storeInfo=e.data,e.data.qrcode_img&&(t.GimgList[0]=e.data.qrcode_img),t.RimgList[0]=e.data.head_img)}))},ChooseImage:function(t){var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(i){switch(t){case"R":e.http.uploadFile("files/fileUploader",i.tempFilePaths[0]).then((function(t){e.RimgList[0]=t.path,e.id_card_imgs[0]=t.path,e.$forceUpdate()}));break;case"G":e.http.uploadFile("files/fileUploader",i.tempFilePaths[0]).then((function(t){e.GimgList[0]=t.path,e.id_card_imgs[1]=t.path,e.$forceUpdate()}));break}}})},ViewImage:function(t){switch(t){case"R":uni.previewImage({urls:[this.http.resourceUrl()+this.RimgList[0]]});break;case"G":uni.previewImage({urls:[this.http.resourceUrl()+this.GimgList[0]]});break}},DelImg:function(t){switch(t){case"R":this.RimgList.splice(0,1),this.id_card_imgs.splice(0,1);break;case"G":this.GimgList.splice(0,1),this.id_card_imgs.splice(1,1);break;default:return}},chooseLocation:function(){var t=this;uni.chooseLocation({success:function(e){t.qqmapsdk.reverseGeocoder({location:{latitude:e.latitude,longitude:e.longitude},success:function(i){console.log(i),t.http.post("user/editStorePosition",{latitude:e.latitude,longitude:e.longitude,adcode:i.result.ad_info.adcode,address:i.result.address}).then((function(e){t.http.toast(e.msg),1e3==e.code&&(t.storeInfo.address=i.result.address)}))},fail:function(e){t.http.toast("获取位置信息失败")}})}})},apply:function(){var t=this;this.http.post("user/edit",{name:this.storeInfo.name,head_img:this.id_card_imgs[0],mobile:this.storeInfo.mobile,business:this.storeInfo.business,enterprise_intro:this.storeInfo.enterprise_intro,qrcode_img:this.id_card_imgs[1]}).then((function(e){1e3==e.code&&(t.http.toast(e.msg),setTimeout((function(){uni.navigateBack({delta:1})}),1e3))}))}}};e.default=n},"746c":function(t,e,i){var s=i("24fb");e=s(!1),e.push([t.i,"uni-page-body[data-v-695f81a9]{background-color:#fff;height:100vh}.logobtn[data-v-695f81a9]{width:100%;height:%?88?%;position:fixed;bottom:%?0?%;-webkit-border-radius:0;border-radius:0}body.?%PAGE?%[data-v-695f81a9]{background-color:#fff}",""]),t.exports=e},"8fb3":function(t,e,i){"use strict";i.r(e);var s=i("3071"),n=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);e["default"]=n.a},af7c:function(t,e,i){var s=i("746c");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var n=i("4f06").default;n("35079827",s,!0,{sourceMap:!1,shadowMode:!1})},bf14:function(t,e,i){"use strict";i.r(e);var s=i("2442"),n=i("8fb3");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("1745");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"695f81a9",null,!1,s["a"],o);e["default"]=c.exports}}]);