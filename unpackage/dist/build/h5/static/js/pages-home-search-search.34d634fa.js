(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-search-search"],{"7a16":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-74f8758a]{background:#fff;height:100vh}body.?%PAGE?%[data-v-74f8758a]{background:#fff}",""]),t.exports=e},9002:function(t,e,i){"use strict";i.r(e);var n=i("da17"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"99bd":function(t,e,i){"use strict";var n=i("fdd4"),a=i.n(n);a.a},d039c:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-green",isBack:!0,showBackImg:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("搜索")])],2),i("v-uni-view",{staticClass:"cu-bar search bg-white padding-lr"},[i("v-uni-view",{staticClass:"action text-gray text-sm"},[i("v-uni-picker",{attrs:{value:t.index,range:t.picker,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.PickerChange.apply(void 0,arguments)}}},[t._v(t._s(t.picker[t.index].name)),i("v-uni-text",{staticClass:"cuIcon-triangledownfill"})],1)],1),i("v-uni-view",{staticClass:"search-form round bg-white"},[i("v-uni-text",{staticClass:"cuIcon-search"}),i("v-uni-input",{attrs:{"adjust-position":!1,type:"text",placeholder:"搜索供应","confirm-type":"search"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.InputFocus.apply(void 0,arguments)}},model:{value:t.searchData,callback:function(e){t.searchData=e},expression:"searchData"}})],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn line-yellow shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.empty.apply(void 0,arguments)}}},[t._v("取消")])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.showSearchList,expression:"!showSearchList"}],staticClass:"bg-white padding-lr-xl"},[i("v-uni-view",{staticClass:"flex align-center margin-bottom"},[i("v-uni-view",{staticClass:"bg-green padding-xs radius text-center margin-right-sm flex align-center justify-center",staticStyle:{width:"60rpx",height:"60rpx"}},[i("v-uni-text",{staticClass:"cuIcon-search",staticStyle:{"font-size":"48rpx"}})],1),i("v-uni-view",{staticClass:"text-df text-black text-bold"},[t._v("历史搜索")])],1),i("v-uni-view",{staticClass:"cu-list grid col-4 no-border"},t._l(t.historyList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"cu-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toGongYing(e)}}},[t._v(t._s(e.name))])})),1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.showSearchList,expression:"!showSearchList"}],staticClass:"bg-white padding-lr-xl padding-top-xl"},[i("v-uni-view",{staticClass:"flex align-center margin-bottom"},[i("v-uni-view",{staticClass:"bg-orange padding-xs radius text-center margin-right-sm flex align-center justify-center",staticStyle:{width:"60rpx",height:"60rpx"}},[i("v-uni-text",{staticClass:"cuIcon-hot",staticStyle:{"font-size":"48rpx"}})],1),i("v-uni-view",{staticClass:"text-df text-black text-bold"},[t._v("热门搜索")])],1),i("v-uni-view",{staticClass:"cu-list grid col-4 no-border"},t._l(t.hotList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"cu-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toGongYing(e)}}},[t._v(t._s(e.name))])})),1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showSearchList,expression:"showSearchList"}],staticClass:"bg-white"},t._l(t.searchList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"padding-xl solid-bottom",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.StoGongYing(e)}}},[t._v(t._s(e.category)+"—>"+t._s(e.breed_name))])})),1)],1)},s=[]},da17:function(t,e,i){"use strict";i("99af"),i("4de4"),i("c740"),i("26e9"),i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={onLoad:function(t){t.isSupply&&(this.isSupply=!0),this.getHistoryList(),this.getHotSearch()},onReachBottom:function(){this.showSearchList&&(this.current_page<this.last_page?(this.current_page++,this.getInfo(this.current_page)):this.http.toast("到底了！"))},data:function(){return{isSupply:!1,index:0,type:1,picker:[{name:"供应",type:1},{name:"求购",type:3}],searchData:"",historyList:[],hotList:[],current_page:0,last_page:0,showSearchList:!1,searchList:[]}},methods:{getHistoryList:function(){this.historyList=uni.getStorageSync("historyList")},setHistoryList:function(t){var e=this,i=[],n=uni.getStorageSync("historyList");0!=n.length&&(i=n),0==i.length||i.length<8?(i.push(this._format_historyList(t)),i.length>2&&(i=i.reverse().filter((function(t,e){var n=i.findIndex((function(e){return t.id==e.id}));return e==n})))):8==i.length&&-1==i.findIndex((function(i){return i.id==e._format_historyList(t).id}))&&(i.splice(0,1),i.push(this._format_historyList(t))),uni.setStorageSync("historyList",i)},_format_historyList:function(t){return{id:t.id||t.breed_id,name:t.name||t.breed_name}},getHotSearch:function(){var t=this;this.http.post("breed/getHotSearch").then((function(e){1e3==e.code&&(t.hotList=e.data)}))},toGongYing:function(t){if(this.setHistoryList(t),this.isSupply)return uni.$emit("Supply_breed_id",{Supply_breed_id:t.id}),void uni.navigateBack({delta:1});uni.redirectTo({url:"../gongying/gongying?breed_id="+t.id+"&type="+this.type+"&category="+t.name})},StoGongYing:function(t){if(this.setHistoryList(t),this.isSupply)return uni.$emit("Supply_breed_id",{Supply_breed_id:t.breed_id}),void uni.navigateBack({delta:1});uni.redirectTo({url:"../gongying/gongying?breed_id="+t.breed_id+"&type="+this.type+"&category="+t.breed_name})},PickerChange:function(t){this.index=t.detail.value,this.type=this.picker[this.index].type},InputFocus:function(t){""!=this.searchData?(this.showSearchList=!0,this.getSearchList(1)):this.showSearchList=!1},empty:function(){this.showSearchList=!1,this.searchData=""},getSearchList:function(t){var e=this;this.http.post("breed/searchBreeds",{keyword:this.searchData,page:t}).then((function(t){1e3==t.code&&(0==e.searchList.length?(e.searchList=t.data.data,e.current_page=t.data.current_page,e.last_page=t.data.last_page):e.searchList=e.searchList.concat(t.data.data))}))}}};e.default=n},f5ff:function(t,e,i){"use strict";i.r(e);var n=i("d039c"),a=i("9002");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("99bd");var r,c=i("f0c5"),o=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"74f8758a",null,!1,n["a"],r);e["default"]=o.exports},fdd4:function(t,e,i){var n=i("7a16");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("4ac2c61a",n,!0,{sourceMap:!1,shadowMode:!1})}}]);