(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-supply-detail"],{"06c5":function(e,t,i){"use strict";i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=s(i("6b75"));function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(e){if("string"===typeof e)return(0,a.default)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,a.default)(e,t):void 0}}},"091b":function(e,t,i){"use strict";var a=i("4ea4");i("a4d3"),i("e01a"),i("99af"),i("a434"),i("ac1f"),i("466d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i("b85c")),n={onLoad:function(e){this.supply_id=e.id,this.getDetail(),this.getUnit()},onShow:function(){var e=this;uni.$on("GYChange",(function(t){e.screenList=t.screenList,e.sizeChange()})),this.$forceUpdate()},data:function(){return{supply_id:"",breed_id:"",name:"",screenList:[{title:"杆径",type:"picker",value1:0,value2:0,index:0,value:""},{title:"*",id:"",type:"input",value1:"",value2:"",unit:"公分"},{title:"高度",id:"",type:"input",value1:"",value2:"",unit:"厘米"},{title:"冠幅",id:"",type:"input",value1:"",value2:"",unit:"厘米"},{title:"种植状态",id:"",type:"picker",value1:0,value2:0,index:0,value:[]},{title:"树冠",id:"",type:"picker",value1:0,value2:0,index:0,value:[]},{title:"品质",id:"",type:"picker",value1:0,value2:0,index:0,value:[]},{title:"土质",type:"picker",id:"",value1:0,value2:0,index:0,value:[]},{title:"树形",type:"picker",id:"",value1:0,value2:0,index:0,value:[]},{title:"分枝点",id:0,type:"input",value1:"",value2:"",unit:"厘米"},{title:"茂密度",id:"",type:"picker2",value1:0,value2:0,index:0,value:[]},{title:"苗木形态",id:"",type:"picker",value1:0,value2:0,index:0,value:[]}],size:{},typeRadio:"A",sell_type:1,single_price:0,stock:"",unit_id:"",index:0,picker:[],radio:"A",usage_type:0,area_id:100010,region:["北京市","北京市","东城区"],textareaBValue:"",imgList:[],resource:[]}},methods:{getDetail:function(){var e=this;this.http.post("supply/getEditDetail",{supply_id:this.supply_id}).then((function(t){if(1e3==t.code){e.name=t.data.breed.breed_name,e.breed_id=t.data.breed.breed_id,e.textareaBValue=t.data.detail.description,e.resource=t.data.detail.img,e.stock=t.data.detail.stock,e.unit_id=t.data.detail.unit_id,e.area_id=t.data.detail.area_id;var i=/.+?(省|市|自治区|自治州|县|区)/g;e.region=t.data.area.address.match(i),e.size=t.data.size.data,e.imgList=t.data.detail.img,e.screenList[0].id=t.data.size.data.rodDiameter.id,e.screenList[1].value1=t.data.size.data.rodDiameter.value1,e.screenList[1].value2=t.data.size.data.rodDiameter.value2,e.screenList[2].value1=t.data.size.data.height.value1,e.screenList[2].value2=t.data.size.data.height.value2,e.screenList[3].value1=t.data.size.data.crownWidth.value1,e.screenList[3].value2=t.data.size.data.crownWidth.value2,e.screenList[4].id=t.data.size.data.plantingStatus.id,e.screenList[5].id=t.data.size.data.treeCrown.id,e.screenList[6].id=t.data.size.data.quality.id,e.screenList[7].id=t.data.size.data.soilQuality.id,e.screenList[8].id=t.data.size.data.treeShape.id,e.screenList[9].value1=t.data.size.data.density.value1,e.screenList[9].value2=t.data.size.data.density.value2,e.screenList[10].id=t.data.size.data.density.id,e.screenList[11].id=t.data.size.data.nurseryForm.id,0==t.data.detail.sell_type&&(e.typeRadio="B",e.sell_type=0,e.single_price=t.data.detail.single_price),1==t.data.detail.usage_type&&(e.radio="B",e.usage_type=1)}}))},_formatImg:function(e){return{fileType:"image",tempFilePath:e}},getUnit:function(){var e=this;this.http.post("breed/getUnit").then((function(t){1e3==t.code&&(e.picker=t.data)}))},PickerChange:function(e){this.index=e.detail.value},toGuiGe:function(){uni.navigateTo({url:"screen?screenList="+JSON.stringify(this.screenList)})},RadioTypeChange:function(e){this.typeRadio=e.detail.value,"B"==this.typeRadio?this.sell_type=0:this.sell_type=1},RadioChange:function(e){this.radio=e.detail.value,"B"==this.radio?this.usage_type=1:(this.usage_type=0,this.single_price=0)},RegionChange:function(e){console.log(e),this.region=e.detail.value,this.area_id=e.detail.code[2]},chooseMedia:function(){var e=this;uni.chooseMedia({count:9,mediaType:["image","video"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(t){if(0!=e.imgList.length){e.imgList=e.imgList.concat(t.tempFiles);var i,a=(0,s.default)(t.tempFiles);try{for(a.s();!(i=a.n()).done;){var n=i.value;e.http.uploadFile("files/fileUploader",n.tempFilePath,n.fileType).then((function(t){e.resource.push(t.path)}))}}catch(u){a.e(u)}finally{a.f()}}else{e.imgList=t.tempFiles;var l,r=(0,s.default)(t.tempFiles);try{for(r.s();!(l=r.n()).done;){var c=l.value;e.http.uploadFile("files/fileUploader",c.tempFilePath,c.fileType).then((function(t){e.resource.push(t.path)}))}}catch(u){r.e(u)}finally{r.f()}}console.log(t),console.log(e.imgList),console.log(e.resource)}})},ViewImage:function(e){uni.previewImage({urls:[e]})},DelImg:function(e){this.imgList.splice(e.currentTarget.dataset.index,1),this.resource.splice(e.currentTarget.dataset.index,1)},sizeChange:function(){var e=this;this.size["rodDiameter"]=e._format(e.screenList[1]),this.size["height"]=e._format(e.screenList[2]),this.size["crownWidth"]=e._format(e.screenList[3]),this.size["plantingStatus"]=e._format(e.screenList[4]),this.size["treeCrown"]=e._format(e.screenList[5]),this.size["quality"]=e._format(e.screenList[6]),this.size["soilQuality"]=e._format(e.screenList[7]),this.size["treeShape"]=e._format(e.screenList[8]),this.size["density"]=e._format(e.screenList[9]),this.size["branch"]=e._format(e.screenList[10]),this.size["nurseryForm"]=e._format(e.screenList[11]),console.log(this.size)},_format:function(e){var t={};return t["id"]=e.id||0,t["value1"]=e.value1||0,t["value2"]=e.value2||0,t},apply:function(){var e=this;uni.request({url:this.http.interfaceUrl()+"supply/editSupply",method:"POST",header:{Authorization:"Bearer "+this.http.getToken()},data:{supply_id:this.supply_id,breed_id:this.breed_id,size:this.size,sell_type:this.sell_type,stock:this.stock,single_price:this.single_price,unit_id:this.picker[this.index].id,usage_type:this.usage_type,area_id:this.area_id,img:this.resource,description:this.textareaBValue},success:function(t){e.http.toast(t.data.msg),1e3==t.data.code&&setTimeout((function(){uni.navigateBack({delta:1})}),1e3)},fail:function(){},complete:function(){}})}}};t.default=n},"1b7f":function(e,t,i){"use strict";var a=i("c733"),s=i.n(a);s.a},"40f2":function(e,t,i){"use strict";i.r(t);var a=i("091b"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},"55b5":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-green",isBack:!0,showBackImg:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[e._v("供应详情")])],2),i("v-uni-form",[i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("货品名称")]),i("v-uni-input",{staticClass:"flex-treble",staticStyle:{"font-size":"32rpx"},attrs:{disabled:"true",name:"input"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("货品规格")]),0==e.screenList.length?i("v-uni-input",{staticClass:"flex-treble",staticStyle:{"font-size":"32rpx"},attrs:{disabled:"true",placeholder:"请选择货品规格",name:"input"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toGuiGe.apply(void 0,arguments)}}}):i("v-uni-view",{staticClass:"flex-treble flex align-center",staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toGuiGe.apply(void 0,arguments)}}},e._l(e.screenList,(function(t,a){return"input"==t.type&&a<3?i("v-uni-text",{key:a,staticStyle:{"font-size":"32rpx"}},[e._v(e._s(t.title)+":"+e._s(t.value1)+"-"+e._s(t.value2))]):e._e()})),1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("选择类型")]),i("v-uni-radio-group",{staticClass:"flex-treble block flex justify-start",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.RadioTypeChange.apply(void 0,arguments)}}},[i("v-uni-label",{staticClass:"flex justify-center align-center margin-right-xl"},[i("v-uni-radio",{class:"A"==e.typeRadio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"A"==e.typeRadio,value:"A"}}),i("v-uni-view",{staticClass:"title"},[e._v("电议")])],1),i("v-uni-label",{staticClass:"flex justify-center align-center"},[i("v-uni-radio",{class:"B"==e.typeRadio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"B"==e.typeRadio,value:"B"}}),i("v-uni-view",{staticClass:"title"},[e._v("单位价格")]),i("v-uni-input",{staticClass:"solid margin-left-xs text-sm padding-xs",staticStyle:{width:"150rpx"},attrs:{type:"number",placeholder:"输入价格","placeholder-class":"text-sm"},model:{value:e.single_price,callback:function(t){e.single_price=t},expression:"single_price"}})],1)],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("供品数量")]),i("v-uni-view",{staticClass:"flex-treble flex justify-between"},[i("v-uni-input",{staticClass:"flex-treble",staticStyle:{"font-size":"32rpx"},attrs:{type:"number",placeholder:"请输入供品数量",name:"input"},model:{value:e.stock,callback:function(t){e.stock=t},expression:"stock"}}),i("v-uni-picker",{staticClass:"flex-sub",attrs:{value:e.index,range:e.picker,"range-key":"text"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.PickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"flex align-center justify-end",staticStyle:{"font-size":"32rpx"}},[e._v(e._s(e.picker[e.index].text)),i("v-uni-text",{staticClass:"cuIcon-triangledownfill",staticStyle:{"font-size":"48rpx"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("选择类型")]),i("v-uni-radio-group",{staticClass:"flex-treble block flex justify-start",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.RadioChange.apply(void 0,arguments)}}},[i("v-uni-label",{staticClass:"flex justify-center align-center margin-right-xl"},[i("v-uni-radio",{class:"A"==e.radio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"A"==e.radio,value:"A"}}),i("v-uni-view",{staticClass:"title"},[e._v("家庭供应")])],1),i("v-uni-label",{staticClass:"flex justify-center align-center"},[i("v-uni-radio",{class:"B"==e.radio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"B"==e.radio,value:"B"}}),i("v-uni-view",{staticClass:"title"},[e._v("工程供应")])],1)],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("选择地区")]),i("v-uni-picker",{staticClass:"flex-treble",attrs:{mode:"region",value:e.region},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.RegionChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.region[0])+"-"+e._s(e.region[1])+"-"+e._s(e.region[2]))])],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm",staticStyle:{height:"200rpx"}},[e._v("货品说明")]),i("v-uni-textarea",{staticClass:"flex-treble padding-top",staticStyle:{"font-size":"32rpx",height:"200rpx"},attrs:{maxlength:"-1",placeholder:"请填写货品特色，种植情况等"},model:{value:e.textareaBValue,callback:function(t){e.textareaBValue=t},expression:"textareaBValue"}})],1),i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action"},[e._v("图片上传")]),i("v-uni-view",{staticClass:"action"},[e._v("添加图片或视频(最多9张)")])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[e._l(e.imgList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"bg-img",attrs:{"data-url":e.imgList[a].tempFilePath},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.ViewImage(t.tempFilePath)}}},["image"==t.fileType?i("v-uni-image",{attrs:{src:t.tempFilePath,mode:"aspectFill"}}):e._e(),"video"==t.fileType?i("v-uni-image",{attrs:{src:t.thumbTempFilePath,mode:"aspectFill"}}):i("v-uni-image",{attrs:{src:e.http.resourceUrl()+t,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":a},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.DelImg.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),e.imgList.length<9?i("v-uni-view",{staticClass:"solids",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseMedia.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):e._e()],2)],1)],1),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-button",{staticClass:"cu-btn bg-green logobtn ",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.apply.apply(void 0,arguments)}}},[e._v("确认修改")])],1)},n=[]},"6b75":function(e,t,i){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},b85c:function(e,t,i){"use strict";i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=s(i("06c5"));function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=(0,a.default)(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){c=!0,l=e},f:function(){try{r||null==i["return"]||i["return"]()}finally{if(c)throw l}}}}},c733:function(e,t,i){var a=i("d3dd");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("781df36f",a,!0,{sourceMap:!1,shadowMode:!1})},cfea:function(e,t,i){"use strict";i.r(t);var a=i("55b5"),s=i("40f2");for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("1b7f");var l,r=i("f0c5"),c=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"5cfcdae6",null,!1,a["a"],l);t["default"]=c.exports},d3dd:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"uni-page-body[data-v-5cfcdae6]{background-color:#fff;height:100vh}.logobtn[data-v-5cfcdae6]{width:100%;height:%?88?%;position:fixed;bottom:%?0?%;-webkit-border-radius:0;border-radius:0;z-index:999}body.?%PAGE?%[data-v-5cfcdae6]{background-color:#fff}",""]),e.exports=t}}]);