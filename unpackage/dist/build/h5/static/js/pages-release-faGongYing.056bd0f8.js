(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-release-faGongYing"],{"06c5":function(e,t,i){"use strict";i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(i("6b75"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(e){if("string"===typeof e)return(0,a.default)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,a.default)(e,t):void 0}}},"156b":function(e,t,i){var a=i("d45f");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("26f6ef7a",a,!0,{sourceMap:!1,shadowMode:!1})},"3dd6":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-green",isBack:!0,showBackImg:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[e._v("发供应")])],2),i("v-uni-form",[i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("货品名称")]),i("v-uni-input",{staticClass:"flex-treble",staticStyle:{"font-size":"32rpx"},attrs:{disabled:"true",name:"input"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("货品规格")]),0==e.screenList.length?i("v-uni-input",{staticClass:"flex-treble",staticStyle:{"font-size":"32rpx"},attrs:{disabled:"true",placeholder:"请选择货品规格",name:"input"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toGuiGe.apply(void 0,arguments)}}}):i("v-uni-view",{staticClass:"flex-treble flex align-center",staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[e._l(e.screenList,(function(t,a){return"input"==t.type&&a<3?i("v-uni-text",{key:a,staticStyle:{"font-size":"32rpx"}},[e._v(e._s(t.title)+":"+e._s(t.value1)+"-"+e._s(t.value2))]):e._e()})),e._l(e.screenList,(function(t,a){return"picker"==t.type&&a<3?i("v-uni-text",{key:a,staticStyle:{"font-size":"32rpx"}},[e._v(e._s(t.title)+":"+e._s(t.value[t.index].text))]):e._e()}))],2)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("选择类型")]),i("v-uni-radio-group",{staticClass:"flex-treble block flex justify-start",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.RadioTypeChange.apply(void 0,arguments)}}},[i("v-uni-label",{staticClass:"flex justify-center align-center margin-right-xl"},[i("v-uni-radio",{class:"A"==e.typeRadio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"A"==e.typeRadio,value:"A"}}),i("v-uni-view",{staticClass:"title"},[e._v("电议")])],1),i("v-uni-label",{staticClass:"flex justify-center align-center"},[i("v-uni-radio",{class:"B"==e.typeRadio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"B"==e.typeRadio,value:"B"}}),i("v-uni-view",{staticClass:"title"},[e._v("单位价格")]),i("v-uni-input",{staticClass:"solid margin-left-xs text-sm padding-xs",staticStyle:{width:"150rpx"},attrs:{type:"digit",placeholder:"输入价格","placeholder-class":"text-sm"},model:{value:e.single_price,callback:function(t){e.single_price=t},expression:"single_price"}})],1)],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("供品数量")]),i("v-uni-view",{staticClass:"flex-treble flex justify-between"},[i("v-uni-input",{staticClass:"flex-treble",staticStyle:{"font-size":"32rpx"},attrs:{type:"number",placeholder:"请输入供品数量",name:"input"},model:{value:e.stock,callback:function(t){e.stock=t},expression:"stock"}}),i("v-uni-picker",{staticClass:"flex-sub",attrs:{value:e.index,range:e.picker,"range-key":"text"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.PickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"flex align-center justify-end",staticStyle:{"font-size":"32rpx"}},[e._v(e._s(e.picker[e.index].text)),i("v-uni-text",{staticClass:"cuIcon-triangledownfill",staticStyle:{"font-size":"48rpx"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("选择类型")]),i("v-uni-radio-group",{staticClass:"flex-treble block flex justify-start",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.RadioChange.apply(void 0,arguments)}}},[i("v-uni-label",{staticClass:"flex justify-center align-center margin-right-xl"},[i("v-uni-radio",{class:"A"==e.radio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"A"==e.radio,value:"A"}}),i("v-uni-view",{staticClass:"title"},[e._v("家庭供应")])],1),i("v-uni-label",{staticClass:"flex justify-center align-center"},[i("v-uni-radio",{class:"B"==e.radio?"checked":"",staticStyle:{transform:"scale(0.6)"},attrs:{checked:"B"==e.radio,value:"B"}}),i("v-uni-view",{staticClass:"title"},[e._v("工程供应")])],1)],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm"},[e._v("选择地区")]),i("v-uni-picker",{staticClass:"flex-treble",attrs:{mode:"region",value:e.region},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.RegionChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.region[0])+"-"+e._s(e.region[1])+"-"+e._s(e.region[2]))])],1)],1),i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"title bg-gray text-center flex-sub padding margin-right-sm",staticStyle:{height:"200rpx"}},[e._v("货品说明")]),i("v-uni-textarea",{staticClass:"flex-treble padding-top",staticStyle:{"font-size":"32rpx",height:"200rpx"},attrs:{maxlength:"-1",placeholder:"请填写货品特色，种植情况等"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.textareaBInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action"},[e._v("图片上传")]),i("v-uni-view",{staticClass:"action"},[e._v("添加图片或视频(最多9张)")])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[e._l(e.imgList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"bg-img",attrs:{"data-url":e.imgList[a].tempFilePath},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.ViewImage(t.tempFilePath)}}},["image"==t.fileType?i("v-uni-image",{attrs:{src:t.tempFilePath,mode:"aspectFill"}}):e._e(),"video"==t.fileType?i("v-uni-image",{attrs:{src:t.thumbTempFilePath,mode:"aspectFill"}}):e._e(),i("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":a},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.DelImg.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),e.imgList.length<9?i("v-uni-view",{staticClass:"solids",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseMedia.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):e._e()],2)],1)],1),i("v-uni-view",{staticClass:"cu-tabbar-height"}),i("v-uni-button",{staticClass:"cu-btn bg-green logobtn ",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.apply.apply(void 0,arguments)}}},[e._v("确认发布")])],1)},s=[]},"6b75":function(e,t,i){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"822c":function(e,t,i){"use strict";var a=i("4ea4");i("99af"),i("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("b85c")),s={onLoad:function(e){this.name=e.name,this.breed_id=e.id,this.getUnit()},onShow:function(){var e=this;uni.$on("GYScreenChange",(function(t){e.screenList=t.screenList,e.sizeChange()})),this.$forceUpdate()},data:function(){return{breed_id:"",name:"",screenList:[],size:{},index:0,typeRadio:"A",sell_type:1,single_price:0,stock:"",picker:[],radio:"A",usage_type:0,area_id:100010,region:["北京市","北京市","东城区"],textareaBValue:"",imgList:[],resource:[]}},methods:{getUnit:function(){var e=this;this.http.post("breed/getUnit").then((function(t){1e3==t.code&&(e.picker=t.data)}))},PickerChange:function(e){this.index=e.detail.value},toGuiGe:function(){this.size.length,uni.navigateTo({url:"GYscreen"})},RadioTypeChange:function(e){this.typeRadio=e.detail.value,"B"==this.typeRadio?this.sell_type=0:this.sell_type=1},RadioChange:function(e){this.radio=e.detail.value,"B"==this.radio?this.usage_type=1:(this.usage_type=0,this.single_price=0)},RegionChange:function(e){console.log(e),this.region=e.detail.value,this.area_id=e.detail.code[2]},textareaBInput:function(e){this.textareaBValue=e.detail.value},chooseMedia:function(){var e=this;uni.chooseMedia({count:9,mediaType:["image","video"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(t){if(0!=e.imgList.length){e.imgList=e.imgList.concat(t.tempFiles);var i,a=(0,n.default)(t.tempFiles);try{for(a.s();!(i=a.n()).done;){var s=i.value;e.http.uploadFile("files/fileUploader",s.tempFilePath,s.fileType).then((function(t){e.resource.push(t.path)}))}}catch(o){a.e(o)}finally{a.f()}}else{e.imgList=t.tempFiles;var r,l=(0,n.default)(t.tempFiles);try{for(l.s();!(r=l.n()).done;){var c=r.value;e.http.uploadFile("files/fileUploader",c.tempFilePath,c.fileType).then((function(t){e.resource.push(t.path)}))}}catch(o){l.e(o)}finally{l.f()}}console.log(t),console.log(e.imgList),console.log(e.resource)}})},ViewImage:function(e){uni.previewImage({urls:[e]})},DelImg:function(e){this.imgList.splice(e.currentTarget.dataset.index,1),this.resource.splice(e.currentTarget.dataset.index,1)},sizeChange:function(){var e=this;this.size["rodDiameter"]=e._format(e.screenList[1]),this.size["height"]=e._format(e.screenList[2]),this.size["crownWidth"]=e._format(e.screenList[3]),this.size["plantingStatus"]=e._format(e.screenList[4]),this.size["treeCrown"]=e._format(e.screenList[5]),this.size["quality"]=e._format(e.screenList[6]),this.size["soilQuality"]=e._format(e.screenList[7]),this.size["treeShape"]=e._format(e.screenList[8]),this.size["density"]=e._format(e.screenList[9]),this.size["branch"]=e._format(e.screenList[10]),this.size["nurseryForm"]=e._format(e.screenList[11]),console.log(this.size)},_format:function(e){var t={};return t["id"]=e.id||0,t["value1"]=e.value1||0,t["value2"]=e.value2||0,t},apply:function(){var e=this;uni.request({url:this.http.interfaceUrl()+"supply/publishSupply",method:"POST",header:{Authorization:"Bearer "+this.http.getToken()},data:{breed_id:this.breed_id,size:this.size,sell_type:this.sell_type,stock:this.stock,single_price:this.single_price,unit_id:this.picker[this.index].id,usage_type:this.usage_type,area_id:this.area_id,img:this.resource,description:this.textareaBValue},success:function(t){e.http.toast(t.data.msg),1e3==t.data.code&&setTimeout((function(){uni.redirectTo({url:"../mine/supply/supply"})}),1e3)},fail:function(){},complete:function(){}})}}};t.default=s},a420:function(e,t,i){"use strict";i.r(t);var a=i("3dd6"),n=i("de8d");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("bc13");var r,l=i("f0c5"),c=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"09ab6c25",null,!1,a["a"],r);t["default"]=c.exports},b85c:function(e,t,i){"use strict";i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(i("06c5"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=(0,a.default)(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return l=e.done,e},e:function(e){c=!0,r=e},f:function(){try{l||null==i["return"]||i["return"]()}finally{if(c)throw r}}}}},bc13:function(e,t,i){"use strict";var a=i("156b"),n=i.n(a);n.a},d45f:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"uni-page-body[data-v-09ab6c25]{background-color:#fff;height:100vh}.logobtn[data-v-09ab6c25]{width:100%;height:%?88?%;position:fixed;bottom:%?0?%;-webkit-border-radius:0;border-radius:0;z-index:999}body.?%PAGE?%[data-v-09ab6c25]{background-color:#fff}",""]),e.exports=t},de8d:function(e,t,i){"use strict";i.r(t);var a=i("822c"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a}}]);